<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Local Video Grid Reviewer</title>
  <style>
    :root{
      --bg:#0b0f14;
      --panel:#0f172a;
      --fg:#e5e7eb;
      --muted:#94a3b8;
      --accent:#7aa2f7;
      --danger:#ef4444;
      --gap:10px;
      --radius:14px;
      --shadow: 0 8px 24px rgba(0,0,0,.35);
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background:linear-gradient(180deg, #0b0f14 0%, #0a0e13 60%, #0b0f14 100%);
      color:var(--fg);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      overflow:hidden;
    }
    .toolbar{
      position:sticky; top:0; z-index:10;
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
      padding:12px 16px;
      background:rgba(15,23,42,.7);
      backdrop-filter: blur(8px) saturate(140%);
      border-bottom:1px solid rgba(148,163,184,.15);
    }
    .spacer{ flex:1; }
    .count{ color:var(--muted); font-size:14px; }
    .hint{ color:var(--muted); font-size:12px; }
    button{
      appearance:none; border:0; cursor:pointer;
      padding:10px 14px; border-radius:12px;
      background:linear-gradient(180deg, #1e293b, #111827);
      color:#e5e7eb; font-weight:600; letter-spacing:.2px;
      box-shadow: var(--shadow);
    }
    button:hover{ filter:brightness(1.05); }
    button:active{ transform:translateY(1px); }
    button:disabled{ opacity:.45; cursor:not-allowed; }
    .btn-primary{ background:linear-gradient(180deg, #2a4b9e, #1f2b6b); }

    .visually-hidden{ position:fixed; left:-9999px; width:1px; height:1px; opacity:0; pointer-events:none; }

    #gridWrap{
      height: calc(100vh - 60px);
      padding:14px; overflow:auto;
    }
    #grid{
      display:grid; grid-auto-flow:dense;
      gap:var(--gap);
      grid-template-columns: repeat(1, 1fr);
      align-content:start;
    }
    .thumb{
      display:flex; align-items:center; justify-content:center;
      background:linear-gradient(180deg, #0f172a, #0b1222);
      border:1px solid rgba(148,163,184,.16);
      border-radius:var(--radius);
      position:relative;
      overflow:hidden;
      user-select:none;
      box-shadow: var(--shadow);
    }
    .thumb.selected{ box-shadow: 0 0 0 3px rgba(122,162,247,.65), var(--shadow); }
    .thumb.dragging{ opacity:.65; }
    .thumb.drag-over::after{ content:""; position:absolute; inset:0; border:2px dashed var(--accent); border-radius:var(--radius); pointer-events:none; }
    video{ max-width:100%; max-height:100%; width:auto; height:auto; object-fit:contain; background:black; display:block; border-radius: 10px; }
    .filename{ position:absolute; left:0; right:0; bottom:0; font-size:12px; line-height:1.3; color:#d1d5db; padding:6px 8px; background:linear-gradient(180deg, rgba(2,6,23,0), rgba(2,6,23,.75)); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

    .titles-hidden .filename{ display:none; }

    .fs-active .toolbar{ display:none; }
    .fs-active #gridWrap{ height:100vh; padding:14px; display:block; }

    /* Fullscreen tiles: pure black background, no border/shadow */
    .fs-active .thumb{ background:#000 !important; border:none !important; box-shadow:none !important; }
    .fs-active .thumb.selected{ box-shadow:none !important; }
    .fs-active .thumb.drag-over::after{ display:none !important; }

    .footerbar{ position:fixed; right:16px; bottom:16px; z-index:5; background:rgba(2,6,23,.72); border:1px solid rgba(148,163,184,.2); padding:8px 12px; border-radius:10px; color:var(--muted); font-size:12px; }
  </style>
</head>
<body>
  <header class="toolbar" id="toolbar">
    <button id="pickBtn" class="btn-primary">Browse Folder…</button>
    <input type="file" id="folderInput" class="visually-hidden" webkitdirectory directory multiple tabindex="-1" aria-hidden="true" />
    <input type="file" id="orderFileInput" class="visually-hidden" accept=".txt,text/plain" tabindex="-1" aria-hidden="true" />
    <button id="loadOrderBtn" title="Load an order file (clip-order.txt)">Load Order…</button>
    <button id="saveBtn" title="Save clip-order.txt in the chosen folder (or download if permissions are unavailable)" disabled>Save Order</button>
    <button id="toggleTitlesBtn" title="Hide or show clip titles">Hide Titles</button>
    <button id="fsBtn" title="Full screen (hides titles)">Full Screen</button>
    <div class="spacer"></div>
    <span class="count" id="count">0 clips</span>
    <span class="hint">drag to reorder • click to select • press Delete to remove • press F for fullscreen</span>
  </header>

  <div id="gridWrap">
    <div id="grid" aria-live="polite"></div>
  </div>

  <div class="footerbar" id="status" hidden></div>
  <script type="module" src="./app.js"></script>
</body>
</html>
